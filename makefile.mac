#-----------------------------------
# makefile.mac
# macOS-specific build configuration
#-----------------------------------

# to build for the native architecture: (leave blank)
# ARCHS?=
#
# to build for intel:
# ARCHS?=x86_64
#
# to build for apple silicon:
# ARCHS?=arm64
#
# to build a universal=binary chugin:
# ARCHS?=x86_64 arm64
ARCHS?=x86_64 arm64

# construct compiler option string
ARCHOPTS=$(addprefix -arch ,$(ARCHS))

# compiler flags
# NOTE: Added -DFFTCONVOLVER_USE_SSE for both x86 (SSE) and ARM (via sse2neon)
<<<<<<< HEAD
FLAGS+=-mmacosx-version-min=10.9 -D__MACOSX_CORE__ -I$(CK_SRC_PATH) -I/opt/homebrew/include $(ARCHOPTS) -fPIC -DFFTCONVOLVER_USE_SSE
=======
FLAGS+=-mmacosx-version-min=10.9 -D__MACOSX_CORE__ -I$(CK_SRC_PATH) $(ARCHOPTS) -fPIC -DFFTCONVOLVER_USE_SSE
>>>>>>> origin/main

# linker flags
LDFLAGS+=-mmacosx-version-min=10.9 -shared $(ARCHOPTS)

# which C++ compiler
CXX=clang++
# which linker to user
LD=clang++
